import { getTableDataContainer } from "../Table/populateTable.min.js";
import { checkDataTable } from "../Table/populateTable.min.js";

export function search() {
    const searchInput = document.getElementById("searchTableButton");
    let originalData = getTableDataContainer(); // Store original data

    searchInput.addEventListener("input", function (event) {
        const searchText = event.target.value.toLowerCase();

        if (!searchText) {
            // If input is empty, show original data
            checkDataTable({ data: originalData }, true);
            return;
        }

        const filteredData = originalData.filter((row) => {
            return Object.values(row).some((value) => {
                return value.toString().toLowerCase().includes(searchText);
            });
        });
        var tableFormatData = filteredData.map(Object.values);
        checkDataTable({ data: tableFormatData }, true);
    });
}
